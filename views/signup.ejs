<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SignUp</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" />
    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="/form_style.css">
    
</head>

<body>
    <div class="container mt-4">
        <h1>Donor Registration</h1>
        <p class="text-center fs-5 text-decoration-underline">Please fill in the following information to register as a
            blood donor:</p>
        <form action="/signup" method="post">
            <div class="row">
                <!-- donor name field -->
                <div class="form-group col-sm-6">
                    <label for="donor_name" class="form-label fs-5">Name:</label>
                    <input type="text" class="form-control" id="donor_name" name="donor_name"
                        placeholder="Enter Donor Name" required>
                </div>
                <!-- father's name field -->
                <div class="form-group col-sm-6">
                    <label for="father_name" class="form-label fs-5">Father Name:</label>
                    <input type="text" class="form-control" id="father_name" name="father_name"
                        placeholder="Enter Father's Name" required>
                </div>
                <!-- mother's name field -->
                <div class="form-group col-sm-6">
                    <label for="mother_name" class="form-label fs-5">Mother Name:</label>
                    <input type="text" class="form-control" id="mother_name" name="mother_name"
                        placeholder="Enter Mother's Name" required>
                </div>
                <!-- DOB field -->
                <div class="form-group col-sm-6" id="donorForm">
                    <label for="dob" class="form-label fs-5">DOB : </label>
                    <input type="date" class="form-control" id="dob" name="dob" placeholder="Enter DOB :" required>
                    <div id="error-message" class="text-danger mt-2" style="display: none;"></div>
                </div>
                <!-- gender field -->
                <div class="form-group col-sm-6">
                    <label for="gender" class="form-label fs-5">Gender:</label>
                    <div class="gender_css">
                        <div class="font-size-20"><input type="radio" id="male" name="gender" value="male"
                                required><label for="male" style="color: black; font-weight: 400"
                                class="ms-1">Male</label></div>
                        <div class="font-size-20"><input type="radio" id="female" name="gender" value="female"><label
                                for="female" style="color: black; font-weight: 400" class="ms-1">Female</label></div>
                        <div class="font-size-20"><input type="radio" id="other" name="gender" value="other"> <label
                                for="other" style="color: black; font-weight: 400" class="ms-1">Other</label></div>
                    </div>
                </div>
                <!-- slect blood group fiels -->
                <div class="form-group col-sm-6">
                    <label for="blood_group" class="form-label fs-5">Blood Group:</label>
                    <select name="blood_group" id="blood_group" class="form-select form-control"
                        aria-label="Default select example">
                        <option value="A+" selected>A+</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B-">B-</option>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                        <option value="AB+">AB+</option>
                        <option value="AB-">AB-</option>
                        <option value="notknwon">Not Know</option>
                    </select>
                </div>
                <!-- donated before field -->
                <div class="form-group col-sm-6">
                    <label for="donated_before" class="form-label fs-5">Donated Before:</label>
                    <select id="donated_before" name="donated_before" class="form-select form-control"
                        aria-label="Default select example">
                        <option value="NO">NO</option>
                        <option value="YES" selected>YES</option>
                    </select>
                </div>
                <!-- WhatsApp number field -->
                <div class="form-group col-sm-6">
                    <label for="watsapp" class="form-label fs-5">WhatsApp Number:</label>
                    <input type="number" class="form-control" id="watsapp" name="watsapp"
                        placeholder="Enter WhatsApp Number" required>
                    <div id="watsapp-error" class="text-danger mt-2" style="display: none;"></div>
                </div>


                <!-- having any Allergies -->
                <div class="form-group col-sm-6">
                    <label for="allergy" class="form-label fs-5">Do You have any health issue that needs consideration?</label>
                    <input type="text" class="form-control" id="allergy" name="allergy"
                        placeholder="If YES then specifies it, otherwise enter 'NO" required>
                </div>
                <!-- any operation  -->
                <div class="form-group col-sm-6">
                    <label for="operation" class="form-label fs-5">Have You Had Any Operation?</label>
                    <select id="operation" name="operation" class="form-select form-control"
                        aria-label="Default select example">
                        <option value="NO" selected>NO</option>
                        <option value="YES">YES</option>
                    </select>
                </div>
                <!--  mail field -->
                <div class="form-group col-sm-6">
                    <label for="email" class="form-label fs-5">Email Id:</label>
                    <input type="mail" class="form-control" id="email" name="email" placeholder="Enter Mail Id"
                        required>
                </div>
                <!-- password field -->
                <div class="form-group col-sm-6">
                    <label for="password" class="form-label fs-5">Password
                    </label>
                    <div class="input-group">
                        <input type="password" required name="password" class="form-control" id="password"
                            placeholder="Enter Password">
                        <span class="input-group-text">
                            <i class="fas fa-eye eye-button" id="password-eye"></i>
                        </span>
                    </div>
                </div>
            </div>
            <button type="submit" class="submit-btn">Register</button>
        </form>

    </div>

    <script>
        const passwordEye = document.getElementById('password-eye');
        const passwordInput = document.getElementById('password');
        passwordEye.addEventListener('click', () => {
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                passwordEye.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                passwordEye.classList.remove('fa-eye-slash');
            }
        });

        const dobInput = document.getElementById('dob');
        const form = document.getElementById('donorForm');
        const errorMessage = document.getElementById('error-message');

        dobInput.addEventListener('focusout', () => {
            const dob = new Date(dobInput.value);
            const today = new Date();
            const age = today.getFullYear() - dob.getFullYear();
            const monthDifference = today.getMonth() - dob.getMonth();

            if (monthDifference < 0 || (monthDifference === 0 && today.getDate() < dob.getDate())) {
                age--;
            }

            if (age < 18 || age > 60) {
                errorMessage.textContent = 'Only 18-60 year old can donate the blood.';
                errorMessage.style.display = 'block';
                form.onsubmit = (e) => e.preventDefault(); // Prevent form submission
            } else {
                errorMessage.style.display = 'none';
                form.onsubmit = null; // Allow form submission
            }
        });
        const watsappInput = document.getElementById('watsapp');
        const watsappError = document.getElementById('watsapp-error');

        watsappInput.addEventListener('input', () => {
            const watsappValue = watsappInput.value;

            // Check if the input is a valid 10-digit number
            if (!/^\d{10}$/.test(watsappValue)) {
                watsappError.textContent = 'WhatsApp number must be a valid 10-digit number.';
                watsappError.style.display = 'block';
            } else {
                watsappError.style.display = 'none';
            }
        });
    </script>
</body>

</html>